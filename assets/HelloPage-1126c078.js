import{j as t,r as c,L as D,a as F}from"./index-0022d0d2.js";function P({btnRef:s}){const e=()=>{setTimeout(()=>{s.current.classList.remove("active"),setTimeout(()=>{s.current.remove()},300)},500)};return t.jsx("button",{className:"btn-start active",onClick:e,ref:s,children:"start-game"})}function _(s){const e=document.querySelector(".game .game__field"),i=document.createElement("button"),r=document.createElement("div");return i.classList.add("btn-end","active"),i.textContent="start-again",r.classList.add("banner-end","active"),r.textContent=s?"WELL DONE!":"GAME OVER!",i.addEventListener("click",()=>{setTimeout(()=>{i.classList.remove("active"),r.classList.remove("active"),setTimeout(()=>{i.remove(),r.remove()},300)},500)}),e.appendChild(r),e.appendChild(i),i}function E(s){const e=document.querySelector(".arrows__arrow_top"),i=document.querySelector(".arrows__arrow_left"),r=document.querySelector(".arrows__arrow_bot"),a=document.querySelector(".arrows__arrow_right");e.addEventListener("click",()=>{s&&s.dir!=="bot"&&s.changeDirection("top")}),r.addEventListener("click",()=>{s&&s.dir!=="top"&&s.changeDirection("bot")}),i.addEventListener("click",()=>{s&&s.dir!=="right"&&s.changeDirection("left")}),a.addEventListener("click",()=>{s&&s.dir!=="left"&&s.changeDirection("right")}),document.addEventListener("keydown",o=>{switch(o.key){case"ArrowUp":o.preventDefault(),s&&s.dir!=="bot"&&s.changeDirection("top");break;case"ArrowDown":o.preventDefault(),s&&s.dir!=="top"&&s.changeDirection("bot");break;case"ArrowLeft":o.preventDefault(),s&&s.dir!=="right"&&s.changeDirection("left");break;case"ArrowRight":o.preventDefault(),s&&s.dir!=="left"&&s.changeDirection("right");break}})}function v(s,e,i,r){return Math.sqrt(Math.pow(s-i,2)+Math.pow(e-r,2))}class k{constructor(e,i,r,a,o){this.ctx=r,this.canvasWidth=a,this.canvasHeight=o,this.speed=1,this.dir="top",this.x=e,this.y=i,this.vx=0,this.vy=-this.speed,this.radius=6,this.tailLength=150,this.tailIncrease=20,this.points=[{x:this.x,y:this.y,alpha:1},{x:this.x,y:this.y+(this.tailLength/3>>0),alpha:0},{x:this.x+(this.tailLength/3>>0),y:this.y+(this.tailLength/3>>0),alpha:0},{x:this.x+(this.tailLength/3>>0),y:this.y+(this.tailLength*2/3>>0),alpha:0}],this.calcAlpha(!0)}reset(e,i){this.x=e,this.y=i,this.tailLength=150,this.dir="top",this.vx=0,this.vy=-this.speed,this.points=[{x:this.x,y:this.y,alpha:1},{x:this.x,y:this.y+(this.tailLength/3>>0),alpha:0},{x:this.x+(this.tailLength/3>>0),y:this.y+(this.tailLength/3>>0),alpha:0},{x:this.x+(this.tailLength/3>>0),y:this.y+(this.tailLength*2/3>>0),alpha:0}],this.calcAlpha(!0)}increazeSize(){switch(this.tailLength+=this.tailIncrease,this.dir){case"top":this.y=this.y-this.tailIncrease;break;case"bot":this.y=this.y+this.tailIncrease;break;case"left":this.x=this.x-this.tailIncrease;break;case"right":this.x=this.x+this.tailIncrease;break}}calcAlpha(e){for(let i=1;i<this.points.length;i++){const r=this.points[i-1],a=this.points[i],o=v(r.x,r.y,a.x,a.y);if(a.alpha=r.alpha-o/this.tailLength,!e){const h=this.ctx.createLinearGradient(r.x,r.y,a.x,a.y);h.addColorStop(0,`rgba(67, 217, 173, ${r.alpha})`),h.addColorStop(1,`rgba(67, 217, 173, ${a.alpha})`),this.ctx.strokeStyle=h,this.ctx.lineTo(a.x,a.y),this.ctx.stroke()}}}addPoint(){this.points.unshift({x:this.x,y:this.y,alpha:1})}isCollisedWithFood(e,i,r){return v(this.x,this.y,e,i)<=this.radius+r}isCoillisedWithBorder(){if(this.x<=this.radius||this.x>=this.canvasWidth-this.radius||this.y<=this.radius||this.y>=this.canvasHeight-this.radius)return!0}isCollisedWithItself(){for(let e=1;e<this.points.length;e++){const i=this.points[e-1],r=this.points[e],a=Math.max(i.x,r.x),o=Math.min(i.x,r.x),h=Math.max(i.y,r.y),n=Math.min(i.y,r.y);if(a===o&&this.y<h&&this.y>n&&this.x===a||h===n&&this.x<a&&this.x>o&&this.y===h)return!0}}draw(){this.ctx.lineWidth=this.radius*2,this.ctx.lineJoin="round",this.ctx.lineCap="round",this.ctx.beginPath(),this.ctx.moveTo(this.x,this.y),this.calcAlpha(!1)}changeDirection(e){switch(e){case"top":(this.dir==="left"||this.dir==="right")&&this.addPoint(),this.dir="top",this.vx=0,this.vy=-this.speed;break;case"bot":(this.dir==="left"||this.dir==="right")&&this.addPoint(),this.dir="bot",this.vx=0,this.vy=this.speed;break;case"left":(this.dir==="top"||this.dir==="bot")&&this.addPoint(),this.dir="left",this.vx=-this.speed,this.vy=0;break;case"right":(this.dir==="top"||this.dir==="bot")&&this.addPoint(),this.dir="right",this.vx=this.speed,this.vy=0;break}}move(){if(this.x+=this.vx,this.y+=this.vy,this.points[0].x=this.x,this.points[0].y=this.y,this.points.length>1){const e=this.points[this.points.length-1],i=this.points[this.points.length-2],r=i.x-e.x,a=i.y-e.y;r>0?e.x+=this.speed:r<0?e.x-=this.speed:r===0&&a===0&&this.points.pop(),a>0?e.y+=this.speed:a<0&&(e.y-=this.speed)}}}function y(s,e){return Math.random()*(e-s)+s>>0}class M{constructor(e,i,r,a,o){this.x=e,this.y=i,this.radius=6,this.ctx=r,this.canvasWidth=a,this.canvasHeight=o,this.spawnLimit=50}reset(e,i){this.x=e,this.y=i}setNewFood(){this.x=y(this.spawnLimit,this.canvasWidth-this.spawnLimit),this.y=y(this.spawnLimit,this.canvasHeight-this.spawnLimit)}draw(){this.ctx.beginPath(),this.ctx.arc(this.x,this.y,this.radius*3,0,Math.PI*2,!0),this.ctx.fillStyle="rgba(67, 217, 173, .1)",this.ctx.fill(),this.ctx.beginPath(),this.ctx.arc(this.x,this.y,this.radius*2,0,Math.PI*2,!0),this.ctx.fillStyle="rgba(67, 217, 173, .2)",this.ctx.fill(),this.ctx.beginPath(),this.ctx.arc(this.x,this.y,this.radius,0,Math.PI*2,!0),this.ctx.fillStyle="rgb(67, 217, 173)",this.ctx.fill()}}const w="/portfolio-vscode/assets/bg-green-blur-39ca3beb.svg",j="/portfolio-vscode/assets/bg-blue-blur-f04ba822.svg",C="/portfolio-vscode/assets/bolt-up-left-9dd3382e.svg",I="/portfolio-vscode/assets/bolt-up-right-7dee325b.svg",R="/portfolio-vscode/assets/bolt-down-left-19163fb4.svg",W="/portfolio-vscode/assets/bolt-down-right-56599ecf.svg",q="/portfolio-vscode/assets/food-bcdf4ae0.svg",B="/portfolio-vscode/assets/up-arrow-050ded49.svg",H="/portfolio-vscode/assets/left-arrow-d7514d87.svg",T="/portfolio-vscode/assets/bot-arrow-7d22a257.svg",G="/portfolio-vscode/assets/right-arrow-58ceffb2.svg";function z(){return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"arrows__text text",children:["// use keyboard ",t.jsx("br",{}),"// arrows to play"]}),t.jsxs("div",{className:"arrows__inner",children:[t.jsx("img",{src:B,alt:"arrow",className:"arrows__arrow arrows__arrow_top"}),t.jsx("img",{src:H,alt:"arrow",className:"arrows__arrow arrows__arrow_left"}),t.jsx("img",{src:T,alt:"arrow",className:"arrows__arrow arrows__arrow_bot"}),t.jsx("img",{src:G,alt:"arrow",className:"arrows__arrow arrows__arrow_right"})]})]})}function U(){const s={x:98,y:120},e={x:98,y:64},i=10,r=c.useRef(0),a=c.useRef(null),o=c.useRef(null),h=c.useRef(null),[n,L]=c.useState(null),[l,N]=c.useState(null),[m,g]=c.useState("start");function u(){var b;if(!a)return;const x=a.current.getContext("2d"),d=a.current.width,p=a.current.height;switch(L(new k(s.x,s.y,x,d,p)),N(new M(e.x,e.y,x,d,p)),E(n),m){case"start":l==null||l.draw(),n==null||n.draw(),(b=h.current)==null||b.addEventListener("click",()=>{g("game"),o.current=requestAnimationFrame(u)});break;case"end":_(!1).addEventListener("click",()=>{f(),o.current=requestAnimationFrame(u)});break;case"win":_(!0).addEventListener("click",()=>{f(),o.current=requestAnimationFrame(u)});break;case"game":x.clearRect(0,0,d,p),l.draw(),n.draw(),n.move(),n.isCollisedWithFood(l.x,l.y,l.radius)&&(r.current++,r.current===i?g("win"):(l.setNewFood(),n.increazeSize())),(n.isCoillisedWithBorder()||n.isCollisedWithItself())&&g("end"),o.current=requestAnimationFrame(u);break}function f(){g("game"),n.reset(s.x,s.y),l.reset(e.x,e.y),r.current=0}}c.useEffect(()=>(o.current=requestAnimationFrame(u),()=>{cancelAnimationFrame(o.current)}),[a.current,m]);const S=()=>{const x=[];for(let d=0;d<i;d++)x.push(t.jsx("img",{src:q,alt:"food",className:"food__img"+(d<r.current?" eaten":"")},d));return x},A=()=>{if(m==="start")return t.jsx(P,{btnRef:h})};return t.jsxs("div",{className:"game",children:[t.jsx("img",{src:w,alt:"bg-blur",className:"hello__bg hello__bg_green"}),t.jsx("img",{src:j,alt:"bg-blur",className:"hello__bg hello__bg_blue"}),t.jsxs("div",{className:"game__field",children:[t.jsx("canvas",{className:"canvas",ref:a,width:"240",height:"405"}),A()]}),t.jsx("img",{src:C,alt:"bolt",className:"game__bolt game__bolt_up-left"}),t.jsx("img",{src:I,alt:"bolt",className:"game__bolt game__bolt_up-right"}),t.jsx("img",{src:R,alt:"bolt",className:"game__bolt game__bolt_down-left"}),t.jsx("img",{src:W,alt:"bolt",className:"game__bolt game__bolt_down-right"}),t.jsx("div",{className:"arrows",children:t.jsx(z,{})}),t.jsxs("div",{className:"food",children:[t.jsx("div",{className:"food__text text",children:"// food left"}),t.jsx("div",{className:"food__inner",children:S()})]}),t.jsx(D,{to:"/about",className:"game__skip",children:"skip"})]})}const $=({setHeader:s,setFooter:e})=>{const i=F.useMediaQuery({query:"(max-width: 1200px)"}),r=c.useRef(null);return c.useEffect(()=>{i&&(s(!0),e(!0))},[]),t.jsxs("section",{className:"hello page",ref:r,children:[t.jsxs("div",{className:"hello__titles",children:[t.jsx("h2",{className:"hello__subtitle",children:"Hi all. I am"}),t.jsx("h1",{className:"hello__title",children:"Peter Koval"}),t.jsx("div",{className:"hello__title-descr",children:"> Front-end developer"})]}),t.jsxs("div",{className:"hello__descrs",children:[t.jsx("div",{className:"hello__descr",children:i?t.jsx(t.Fragment,{children:"// find my profile on Github:"}):t.jsxs(t.Fragment,{children:["// complete the game to continue ",t.jsx("br",{}),"// you can also see it on my Github page"]})}),t.jsxs("div",{className:"hello__link",children:[t.jsx("span",{className:"const",children:"const"}),t.jsx("span",{className:"const-name",children:" githubLink "}),t.jsx("span",{children:"= "}),t.jsxs("a",{href:"https://evilsepxd.github.io/snake/",className:"const-value",children:['"https://',i&&t.jsx("br",{}),'evilsepxd.github.io/snake/"']})]})]}),!i&&t.jsx(U,{}),i&&t.jsxs(t.Fragment,{children:[t.jsx("img",{src:w,alt:"bg-blur",className:"hello__bg hello__bg_green"}),t.jsx("img",{src:j,alt:"bg-blur",className:"hello__bg hello__bg_blue"})]})]})};export{$ as default};
